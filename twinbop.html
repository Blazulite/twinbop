<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Twinbop's Pasta</title>
    <link rel="icon" type="image/png" href="https://teedata.net/api/skin/render/name/twinbop?emotion=happy_eye" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <meta property="og:title" content="Twinbop My Beloved" />
    <meta property="og:description" content="I love Twinbop" />
    <meta property="og:image" content="https://teedata.net/api/skin/render/name/twinbop?emotion=happy_eye" />
    <meta property="og:type" content="website" />
    <link rel="stylesheet" href="/node_modules/dejavu-sans/css/dejavu-sans.css">
    <style>
      body {
        background: #6690D8;
        font-family: 'DejaVu Sans', sans-serif;
      }
      .outlined-text {
        -webkit-text-stroke: 3px rgba(0, 0, 0, 0.404); /* Outline */
        color: white; /* Text fill */
      }
      .side-by-side {
        display: flex;
        align-items: flex-start;
        justify-content: center;
        gap: 32px;
        margin: 50px auto;
        max-width: 900px;
      }
      .side-by-side img {
        max-width: 220px;
        height: auto;
        border-radius: 12px;
        box-shadow: 0 4px 16px rgba(0,0,0,0.15);
        background: rgba(0, 0, 0, 0.144);
      }
      .side-by-side p {
        position: relative;
        max-width: 600px;
        margin: 0;
        background: rgba(0, 0, 0, 0.144);
        padding: 20px;
        border-radius: 10px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        font-size: 1.2em;
        line-height: 1.6;
      }
      .bouncing-sticker {
        position: fixed;
        left: 0;
        top: 0;
        width: 80px;
        height: 80px;
        z-index: 1000;
        cursor: grab;
        user-drag: none;
        -webkit-user-drag: none;
        user-select: none;
        -moz-user-select: none;
        -webkit-user-select: none;
        -ms-user-select: none;
      }

    </style>
  </head>

  <body>
    <div class="side-by-side">
      <img id="twinbopImg" src="https://teedata.net/api/skin/render/name/twinbop?emotion=default_eye" alt="twinbop" />
      <p class="outlined-text">
        Let me tell you about the most beautiful skin in teeworlds - twinbop. Sure, everyone's running around with their basic default skins or trying to flex with some fancy community creation, but have you SEEN twinbop?
Those gradient eyes are absolutely mesmerizing. Like, you're trying to focus on hitting that tricky part and then BAM - your teammate shows up in twinbop and you're just staring at those dreamy color-shifting eyes instead of watching where you're hooking. It's honestly distracting how pretty this skin is.
And the colors! The way twinbop's gradient flows across the body - it's like someone took a sunset and wrapped it around a tee. No wonder half the server stops what they're doing when someone joins with twinbop equipped. We're all just standing there like "damn, that's one good-looking tee."
      </p>
    </div>
    <script>
      function random(min, max) {
        return Math.random() * (max - min) + min;
      }
      function clamp(v, lo, hi) {
        return Math.min(Math.max(v, lo), hi);
      }

      class Twinbop {
        static audioInflictSuffering(volume) {
          const SRCS = [
            'audio/vo_teefault_pain_long-01.wav',
            'audio/vo_teefault_pain_long-02.wav',
            'audio/vo_teefault_pain_short-01.wav',
            'audio/vo_teefault_pain_short-02.wav',
            'audio/vo_teefault_pain_short-03.wav',
            'audio/vo_teefault_pain_short-04.wav',
            'audio/vo_teefault_pain_short-05.wav',
            'audio/vo_teefault_pain_short-06.wav',
            'audio/vo_teefault_pain_short-07.wav',
            'audio/vo_teefault_pain_short-08.wav',
            'audio/vo_teefault_pain_short-09.wav',
            'audio/vo_teefault_pain_short-10.wav',
            'audio/vo_teefault_pain_short-11.wav',
            'audio/vo_teefault_pain_short-12.wav'
          ];
          const audio = new Audio(SRCS[Math.floor(Math.random() * SRCS.length)]);
          if (volume > 1)
            volume = 1;
          audio.volume = volume * 0.75;
          audio.play().catch(() => {});
        }
        static audioTouchInappropriately() {
          const SRCS = [
            'audio/foley_body_impact-01.wav',
            'audio/foley_body_impact-02.wav',
            'audio/foley_body_impact-03.wav'
          ];
          const audio = new Audio(SRCS[Math.floor(Math.random() * SRCS.length)]);
          audio.volume = 0.2;
          audio.play().catch(() => {});
        }
        makeDraggable() {
          this.dragging = false;
          let throwVel = undefined;
          let lastTime, lastX, lastY, offsetX, offsetY;
          this.img.addEventListener('pointerdown', e => {
            this.img.setPointerCapture(e.pointerId);
            this.dragging = true;
            this.img.style.cursor = 'grabbing';
            offsetX = this.pos.x - e.clientX;
            offsetY = this.pos.y - e.clientY;
            lastX = e.clientX;
            lastY = e.clientY;
            lastTime = performance.now();
            this.vel.x = 0;
            this.vel.y = 0;
            Twinbop.audioTouchInappropriately();
          });
          this.img.addEventListener('pointermove', e => {
            if (!this.dragging) return;
            this.pos.x = offsetX + e.clientX;
            this.pos.y = offsetY + e.clientY;
            let now = performance.now();
            let dt = (now - lastTime) / 1000;
            if (dt > 0) {
              throwVel = {x: (e.clientX - lastX) / dt, y: (e.clientY - lastY) / dt};
              lastX = e.clientX;
              lastY = e.clientY;
              lastTime = now;
            } else {
              throwVel = undefined;
            }
          });
          const pointerUp = e => {
            if (!this.dragging) return;
            this.img.releasePointerCapture(e.pointerId);
            this.dragging = false;
            this.img.style.cursor = 'grab';
            if (performance.now() - lastTime < 50 && throwVel) {
              this.vel.x = throwVel.x;
              this.vel.y = throwVel.y;
            } else {
              this.vel.x = 0;
              this.vel.y = 0;
            }
          };
          this.img.addEventListener('pointerup', pointerUp);
          this.img.addEventListener('pointercancel', pointerUp);
        }
        constructor() {
          const SRCS = [
            'sticker_twinbop.png',
            'sticker_twinbop2.png',
            'sticker_twinbop3.png',
            'sticker_twinbop4.png',
            'sticker_twinbop5.png'
          ];
          this.fat = 80;
          this.img = document.createElement('img');
          this.img.src = SRCS[Math.floor(Math.random() * SRCS.length)];
          this.img.classList.add('bouncing-sticker');
          this.img.style.width = this.fat + 'px';
          this.img.style.height = this.fat + 'px';
          document.body.appendChild(this.img);
          this.pos = {
            x: random(0, window.innerWidth - this.fat),
            y: random(0, window.innerWidth - this.fat),
          };
          this.vel = {
            x: random(-400, 400),
            y: random(-400, 400)
          };
          this.rot = random(-30, 30);
          this.rotvel = random(-200, 200);
          this.makeDraggable();
        }
        step(delta) {
          const GRAVITY = 500; // gravity acceleration
          const DAMPING = 1.0; // energy loss on bounce
          if (!this.dragging) {
            // Gravity
            this.vel.y += GRAVITY * delta;

            let pain = false;
            if (this.pos.x <= 0 || this.pos.x >= window.innerWidth - this.fat) {
              this.vel.x *= -1;
              pain = true;
            }
            if (this.pos.y >= window.innerHeight - this.fat) {
              this.vel.y *= -DAMPING;
              this.pos.y = window.innerHeight - this.fat;
              pain = true;
            }
            if (this.pos.y <= 0) {
              this.vel.y *= -1;
              this.pos.y = 0;
              pain = true;
            }
            if (pain)
              Twinbop.audioInflictSuffering(Math.max(Math.abs(this.vel.x), Math.abs(this.vel.y)) / 5000);

            this.pos.x += this.vel.x * delta;
            this.pos.y += this.vel.y * delta;
          }
          this.rot += this.rotvel * delta;

          // Clamp
          this.pos.x = clamp(this.pos.x, 0, window.innerWidth - this.fat);
          this.pos.y = clamp(this.pos.y, 0, window.innerHeight - this.fat);
          this.img.style.transform = `translate(${this.pos.x}px,${this.pos.y}px) rotate(${this.rot}deg)`;
        }
      }

      const twinbops = [];
      for (let i = 0; i < 16; i++)
        twinbops.push(new Twinbop());

      const timing = {
        last: performance.now(),
        fps: 0,
        delta: 0,
      };
      function frame() {
        requestAnimationFrame(frame);

        const now = performance.now();
        timing.delta = (now - timing.last) / 1000;
        timing.delta = Math.min(timing.delta, 1 / 20);
        timing.fps = 1 / timing.delta;
        timing.last = now;

        // console.log(timing.delta);

        for (const sticker of twinbops)
          sticker.step(timing.delta);
      }
      requestAnimationFrame(frame);

      // TODO
      // function checkCollision(i, j) {
      //   const a = stickers[i];
      //   const b = stickers[j];
      //   const ax = parseFloat(a.style.left) + this.fat / 2;
      //   const ay = parseFloat(a.style.top) + this.fat / 2;
      //   const bx = parseFloat(b.style.left) + this.fat / 2;
      //   const by = parseFloat(b.style.top) + this.fat / 2;
      //   const dist = Math.hypot(ax - bx, ay - by);
      //   return dist < this.fat;
      // }

      // function resolveCollision(i, j) {
      // }

      // function animateStickers() {
      //   window.innerWidth = window.innerWidth;
      //   window.innerHeight = window.innerHeight;
      //   // Collisions
      //   for (let i = 0; i < stickers.length; i++) {
      //     for (let j = i + 1; j < stickers.length; j++) {
      //       if (checkCollision(i, j)) {
      //         resolveCollision(i, j);
      //       }
      //     }
      //   }
    </script>
  </body>
</html>